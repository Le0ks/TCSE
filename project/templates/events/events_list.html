{% extends "base.html" %}

{% load static %}

{% block title %}Мероприятия{% endblock title %}

{% block content %}
    <div class="container">
        <div class="d-flex justify-content-evenly">
            <a href="{% url "events:create_event" %}" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Добавить мероприятие"><img src="{% static "img/plus.png" %}" alt="plus" width=50></a>
            <a href="" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Присоединиться к секретному мероприятию"><img src="{% static "img/lock.png" %}" width=50></a>
        </div>
        {% for event in events %}
            {% if forloop.first %}<div>{% endif %}
            {% ifchanged %}
                </div>
                <div class="mt-3 mb-2">
                    <div class="border-bottom">
                    <a href="{% url "events:category_detail" event.category.slug %}" class="m-3 fs-2 text-decoration-none text-dark fw-bolder">{{ event.category.name }}</a>
                    </div>
                </div>
                <div class="row">
            {% endifchanged %}
                <div class="col-4 gy-3 align-items-stretch">
                    <div class="card">
                        <img src="" alt="" class="card-img-top">
                        <div class="card-body">
                            <h3 class="card-title text-center"><a href="{% url "events:event_detail" event.category.slug event.slug %}" class="text-decoration-none text-dark"> {{ event.name }}</a></h3>
                            <p class="card-text fs-4">{{ event.description }}</p>
                            <p class="lead">Организатор: <span class="badge bg-info text-dark">{{ event.author }}</span></p>
                            {% if event.type_by_time == 1 %}
                                <p class="lead">Продолжительность: {{ event.duration }}</p>
                            {% elif event.type_by_time == 2 %}
                                <p class="lead">Начало: {{ event.start_time }}</p>
                                <p class="lead">Конец: {{ event.finish_time }}</p>
                            {% elif event.type_by_time == 3 %}
                                <p class="lead">Начало: {{ event.start_time }}</p>
                                <p class="lead">Конец: {{ event.finish_time }}</p>
                                <p class="lead">Продолжительность: {{ event.duration }}</p>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% if forloop.last %}</div>{% endif %}
            {% empty %}
            <p>Нет мероприятий</p>
        {% endfor %}
    </div>
{% endblock content %}